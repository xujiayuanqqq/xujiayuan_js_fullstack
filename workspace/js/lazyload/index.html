<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>懒加载图片</title>
</head>

<body>
    <!-- 
         网页在渲染的时候
         http的请求数量
         chrome是性能最好的，同时并发的请求数十几个
         将图片下载 放到dom ready事件之后 将有效提升网页打开速度
         占位图片
         优化前 n张照片 url 不一样 http的请求是n 
         优化后 图片上的http 数量只有1
         如果url一样，不会重复发送请求
    -->
    <img class="pic1"  src="http://static.youku.com/yk/vmanage/img/manage/video/mask.d53611efc6.png" origin_src="http://img4.duitang.com/uploads/item/201503/10/20150310125514_sAZBa.jpeg"
        alt="">

    <img class="pic1" src="http://static.youku.com/yk/vmanage/img/manage/video/mask.d53611efc6.png" origin_src="http://img4.duitang.com/uploads/item/201604/08/20160408150835_BwujL.jpeg"
        alt="">

    <img class="pic1" src="http://static.youku.com/yk/vmanage/img/manage/video/mask.d53611efc6.png" origin_src="http://img3.duitang.com/uploads/item/201512/07/20151207171956_G3s8m.jpeg"
        alt="">

    <script src="lazyload.js"></script>

    <script>
        //已经是用户看到网页了  dom ready
        //优化图片下载 将其推后
        window.onload = function () {
            //懒加载图片

            // //在页面打开后，我们重新下载图片
            const img = document.querySelector('.pic1');
            // //origin_src 自定义属性
            // const url = img.getAttribute('origin_src');
            // console.log(url);
            // // img.src =url；
            // // img.setAttribute('src',url);

            // //图片不要直接url设置过去
            // const oImg = document.createElement('img');
            // oImg.style.display = 'none';
            // document.body.appendChild(oImg);
            // oImg.onload = function () {
            //     //幕后工作者 已经下载了图片
            //     //url 一旦下载，在浏览器缓存(静态)文件
            //     img.src = url;
            // }
            // //图片的下载是异步的，图片有大小
            // oImg.src = url;

            LazyLoadImage.setSrc(img);


        }
    </script>
</body>

</html>